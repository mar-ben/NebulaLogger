<!--**********************************************************************************************
 * This file is part of the Nebula Logger project, released under the MIT License.               *
 * See LICENSE file or go to https://github.com/jongpie/NebulaLogger for full license details.   *
 **********************************************************************************************-->

<template>
    <div class="main-container slds-p-around_none">
        <div style="height: 100%; position: relative">
            <button
                data-id="split-view-button"
                class="slds-button slds-button_icon slds-button_icon slds-split-view__toggle-button slds-is-open"
                title="Close Split View"
                onclick={onToggleStreamSettings}
            >
                <lightning-icon class="slds-button__icon" icon-name="utility:left" size="xx-small" alternative-text="Event" title="Event"></lightning-icon>
                <span class="slds-assistive-text">Close Split View</span>
            </button>
            <div data-id="split-view-container" class="slds-panel slds-size_medium slds-panel_docked slds-panel_docked-left slds-is-open" aria-hidden="false">
                <div class="slds-panel__header">
                    <header class="slds-media slds-media_center slds-has-flexi-truncate">
                        <div class="slds-media__figure">
                            <lightning-icon icon-name="custom:custom27" alternative-text="settings" title="Stream Settings"></lightning-icon>
                        </div>
                        <div class="slds-media__body">
                            <h2 class="slds-card__header-title" aria-level="2"><span class="slds-text-heading_small slds-truncate">Stream Settings</span></h2>
                        </div>
                    </header>
                </div>
                <div class="slds-panel__body">
                    <div class="slds-p-horizontal_small">
                        <lightning-input
                            label="Max Number of Events to Display"
                            onchange={handleMaxEventsChange}
                            placeholder="Specify Max Events"
                            type="number"
                            value={maxEvents}
                        ></lightning-input>
                        <lightning-combobox
                            data-id="loggingLevelFilter"
                            label="Minimum Logging Level"
                            onchange={handleFilterChange}
                            options={loggingLevelOptions}
                            placeholder="Select Logging Level"
                            value={loggingLevelFilter}
                        ></lightning-combobox>
                        <lightning-combobox
                            data-id="originTypeFilter"
                            label="Origin Type"
                            onchange={handleFilterChange}
                            options={originTypeOptions}
                            placeholder="Select Origin Type"
                            value={originTypeFilter}
                        ></lightning-combobox>
                        <lightning-input
                            data-id="originLocationFilter"
                            label="Origin Location"
                            onchange={handleFilterChange}
                            placeholder="Specify Origin Location"
                            value={originLocationFilter}
                        ></lightning-input>
                        <lightning-input
                            data-id="scenarioFilter"
                            label="Scenario"
                            onchange={handleFilterChange}
                            placeholder="Specify Scenario"
                            value={scenarioFilter}
                        ></lightning-input>
                        <lightning-input
                            data-id="loggedByFilter"
                            label="Logged By"
                            onchange={handleFilterChange}
                            placeholder="Specify Username"
                            value={loggedByFilter}
                        ></lightning-input>
                        <lightning-textarea
                            data-id="messageFilter"
                            label="Message"
                            onchange={handleFilterChange}
                            placeholder="Message Contains"
                            value={messageFilter}
                        ></lightning-textarea>
                    </div>
                </div>
            </div>
            <!-- <div style="width: 300px" id="split-view-id" class="slds-split-view slds-p-around_medium">
                <lightning-card title="Stream Settings" icon-name="custom:custom27" class="slds-m-around_medium slds-p-around_none">
                    <div class="slds-p-horizontal_small">
                        <lightning-input
                            label="Max Number of Events to Display"
                            onchange={handleMaxEventsChange}
                            placeholder="Specify Max Events"
                            type="number"
                            value={maxEvents}
                        ></lightning-input>
                        <lightning-combobox
                            data-id="loggingLevelFilter"
                            label="Minimum Logging Level"
                            onchange={handleFilterChange}
                            options={loggingLevelOptions}
                            placeholder="Select Logging Level"
                            value={loggingLevelFilter}
                        ></lightning-combobox>
                        <lightning-combobox
                            data-id="originTypeFilter"
                            label="Origin Type"
                            onchange={handleFilterChange}
                            options={originTypeOptions}
                            placeholder="Select Origin Type"
                            value={originTypeFilter}
                        ></lightning-combobox>
                        <lightning-input
                            data-id="originLocationFilter"
                            label="Origin Location"
                            onchange={handleFilterChange}
                            placeholder="Specify Origin Location"
                            value={originLocationFilter}
                        ></lightning-input>
                        <lightning-input
                            data-id="scenarioFilter"
                            label="Scenario"
                            onchange={handleFilterChange}
                            placeholder="Specify Scenario"
                            value={scenarioFilter}
                        ></lightning-input>
                        <lightning-input
                            data-id="loggedByFilter"
                            label="Logged By"
                            onchange={handleFilterChange}
                            placeholder="Specify Username"
                            value={loggedByFilter}
                        ></lightning-input>
                        <lightning-textarea
                            data-id="messageFilter"
                            label="Message"
                            onchange={handleFilterChange}
                            placeholder="Message Contains"
                            value={messageFilter}
                        ></lightning-textarea>
                    </div>
                </lightning-card>
            </div> -->
        </div>

        <article data-id="event-stream-console" class="slds-card slds-grow slds-m-left_medium">
            <div class="slds-card__header slds-grid">
                <header class="slds-media slds-media_center slds-has-flexi-truncate">
                    <div class="slds-media__body">
                        <h2 class="slds-card__header-title">
                            <span>{title}</span>
                        </h2>
                    </div>
                    <div class="slds-no-flex">
                        <lightning-button-group>
                            <lightning-button-stateful
                                data-id="toggle-stream"
                                icon-name-when-hover="utility:close"
                                icon-name-when-off="utility:pause_alt"
                                icon-name-when-on="utility:play"
                                label-when-hover="  Pause  "
                                label-when-off="Paused"
                                label-when-on="Streaming"
                                onclick={onToggleStream}
                                selected={isStreamEnabled}
                                variant={streamButtonVariant}
                            >
                            </lightning-button-stateful>
                            <lightning-button
                                data-id="clear"
                                label="Clear"
                                icon-name="utility:delete"
                                name="clear"
                                onclick={onClear}
                                variant="destructive"
                            ></lightning-button>
                            <lightning-button-stateful
                                data-id="expand-toggle"
                                icon-name-when-off="utility:expand"
                                icon-name-when-on="utility:contract"
                                label-when-off="Expand"
                                label-when-on="Contract"
                                onclick={onToggleExpand}
                                selected={isExpanded}
                                variant="brand"
                            >
                            </lightning-button-stateful>
                        </lightning-button-group>
                    </div>
                </header>
            </div>
            <div class="slds-p-around_small card-body">
                <div class="slds-p-horizontal_medium event-stream">
                    <template for:each={logEntryEvents} for:item="logEntryEvent">
                        <div key={logEntryEvent.key} class="event-stream-entry">
                            <span key={logEntryEvent.key} class="timestamp">{logEntryEvent.Timestamp__c}</span>
                            <span key={logEntryEvent.key} class="logged-by">{logEntryEvent.LoggedByUsername__c} - {logEntryEvent.key}</span>
                            <span key={logEntryEvent.key} class="origin">{logEntryEvent.OriginType__c}.{logEntryEvent.OriginLocation__c} </span>
                            <span key={logEntryEvent.key} class="logging-level">{logEntryEvent.LoggingLevel__c}</span>
                            <span key={logEntryEvent.key} class="message">{logEntryEvent.Message__c}</span>
                        </div>
                    </template>
                </div>
            </div>
        </article>
    </div>
</template>
